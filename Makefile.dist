CC?=gcc
CFLAGS?=-g -O2 -Wall 
CFLAGS+=-I. -DVERSION=\"$(MAJOR).$(MINOR)\"
PREFIX?=/usr/local
OBJS=\
	cbtcommon/debug.o\
	cbtcommon/hash.o\
	cbtcommon/text_util.o\
	cvsps.o

cvsps: $(OBJS)
	${CC} -o cvsps $(OBJS)

install:
	[ -d ${PREFIX}/bin ] || mkdir -p ${PREFIX}/bin
	[ -d ${PREFIX}/man/man1 ] || mkdir -p ${PREFIX}/man/man1
	install cvsps ${PREFIX}/bin
	install -m 644 cvsps.1 ${PREFIX}/man/man1

clean:
	rm -f cvsps *.o cbtcommon/*.o core

.PHONY: install clean
